<html>
<head>
	<title>test1</title>
	<script language="javascript" type="text/javascript" src="../ready-release.js"></script>
	<script language="javascript" type="text/javascript" src="../loader-release.js"></script>
	<script language="javascript" type="text/javascript">

		// random tests
		 
		var loader = new Loader({ root: 'test1-' });

		function button1() {
			//console.log('button1 clicked');
			loader.requires('module1', function () {
				//console.log('button1 action, everything ready.');
				alert(mod1value);
			});
		};

		function button2() {
			//console.log('button2 clicked');
			loader.requires(['module2'], function () {
				//console.log('button2 action, everything ready.');
				alert(mod2value);
			});
		};

		var x = 3;
		ready(function () {
			loader.requires('dep2', function () {
				x = 42;				
			});
			loader.requires('dep2', function () {
				var el = document.getElementById('legacydebug');
				el.innerHTML = 'ready ' + x;
			});
		});

		ready(function () {
			loader.run(function () {
				var el = document.getElementById('legacydebug');
				el.innerHTML = 'ready '+x;
			});
		});
  
	</script>
</head>
<body>
	<a href="javascript:button1();">button 1</a><br />
	<a href="javascript:button2();">button 2</a><br />
	<div id="legacydebug">
	</div>
</body>
</html>
